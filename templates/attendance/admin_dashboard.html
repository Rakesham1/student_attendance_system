{% extends 'attendance/base.html' %}
{% block title %}Admin Dashboard | AttendX{% endblock %}
{% block page_title %}Admin Dashboard{% endblock %}

{% block content %}
<!-- Stats Row -->
<div class="row g-4 mb-4">
    <div class="col-md-3">
        <div class="stat-card">
            <div class="icon-wrap" style="background:rgba(79,70,229,0.15);color:#818cf8;">
                <i class="bi bi-people-fill"></i>
            </div>
            <div class="stat-value" style="color:#818cf8;">{{ total_students }}</div>
            <div class="stat-label">Total Students</div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-card">
            <div class="icon-wrap" style="background:rgba(6,182,212,0.15);color:#22d3ee;">
                <i class="bi bi-person-workspace"></i>
            </div>
            <div class="stat-value" style="color:#22d3ee;">{{ total_teachers }}</div>
            <div class="stat-label">Total Teachers</div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-card">
            <div class="icon-wrap" style="background:rgba(16,185,129,0.15);color:#34d399;">
                <i class="bi bi-book-fill"></i>
            </div>
            <div class="stat-value" style="color:#34d399;">{{ total_subjects }}</div>
            <div class="stat-label">Total Subjects</div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-card">
            <div class="icon-wrap" style="background:rgba(245,158,11,0.15);color:#fbbf24;">
                <i class="bi bi-building"></i>
            </div>
            <div class="stat-value" style="color:#fbbf24;">{{ total_departments }}</div>
            <div class="stat-label">Departments</div>
        </div>
    </div>
</div>

<!-- Quick Actions + Recent Sessions -->
<div class="row g-4">
    <div class="col-md-4">
        <div class="card-custom">
            <div class="card-header"><i class="bi bi-lightning-charge-fill text-warning me-2"></i>Quick Actions</div>
            <div class="card-body d-grid gap-2">
                <a href="{% url 'manage_students' %}" class="btn btn-primary-custom"><i
                        class="bi bi-person-plus me-2"></i>Add Student</a>
                <a href="{% url 'manage_teachers' %}" class="btn btn-primary-custom"
                    style="background:linear-gradient(135deg,#06b6d4,#0284c7)"><i
                        class="bi bi-person-workspace me-2"></i>Add Teacher</a>
                <a href="{% url 'manage_subjects' %}" class="btn btn-primary-custom"
                    style="background:linear-gradient(135deg,#10b981,#059669)"><i class="bi bi-book me-2"></i>Add
                    Subject</a>
                <a href="{% url 'manage_departments' %}" class="btn btn-primary-custom"
                    style="background:linear-gradient(135deg,#f59e0b,#d97706)"><i class="bi bi-building me-2"></i>Add
                    Department</a>
            </div>
        </div>
    </div>

    <div class="col-md-8">
        <div class="card-custom">
            <div class="card-header"><i class="bi bi-clock-history me-2" style="color:#818cf8;"></i>Recent Attendance
                Sessions</div>
            <div class="card-body p-0">
                {% if recent_sessions %}
                <table class="table table-custom mb-0">
                    <thead>
                        <tr>
                            <th>Subject</th>
                            <th>Date</th>
                            <th>Teacher</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for session in recent_sessions %}
                        <tr>
                            <td><span style="color:#a5b4fc;font-weight:500;">{{ session.subject.code }}</span> â€” {{ session.subject.name }}</td>
                            <td>{{ session.date }}</td>
                            <td>{{ session.teacher.get_full_name }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% else %}
                <div class="text-center py-5" style="color:#64748b;">
                    <i class="bi bi-calendar-x" style="font-size:40px;"></i>
                    <p class="mt-2">No attendance sessions yet.</p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
